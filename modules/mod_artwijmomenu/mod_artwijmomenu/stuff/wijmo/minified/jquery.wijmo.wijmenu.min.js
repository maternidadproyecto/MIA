/*
 *
 * Wijmo Library 1.0.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
"use strict";(function(a){a.widget("wijmo.wijmenu",{options:{trigger:"",triggerEvent:"click",position:{},animated:"slide",showAnimated:"slide",hideAnimated:"slide",duration:400,showDuration:400,hideDuration:400,mode:"flyout",superPanelOptions:null,checkable:false,orientation:"horizontal",maxHeight:200,backLink:true,backLinkText:"Back",topLinkText:"All",crumbDefaultText:"Choose an option"},_create:function(){var b=this,e=b.options,c,d;b.element.hide();b.cssPre="wijmo-wijmenu";b.nowIndex=9999;b._setAnimationOptions();b.refresh();if(!b.options.input)b.options.input=b.element.attr("tabIndex",0);b.options.input.bind("keydown.wijmenu",function(f){if(b.options.disabled)return;var g=b.element.data("activeItem");switch(f.keyCode){case a.ui.keyCode.PAGE_UP:b.previousPage(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:b.nextPage(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.UP:b.previous(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:b.next(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.RIGHT:if(g){c=a(">ul",g);c.length>0&&c.is(":visible")&&b.activate(f,c.children(":first"))}break;case a.ui.keyCode.LEFT:c=g.parent();d=c.parent();d.is("li")&&b.activate(f,d);break;case a.ui.keyCode.ENTER:b.select();if(g.length>0)if(e.mode==="flyout"&&g.has("ul").length>0)b._showFlyoutSubmenu(f,g,g.find("ul:first"));else g.children(":first").trigger("click");f.preventDefault();f.stopImmediatePropagation()}})},_destroy:function(){var b=this.options,a=this;if(b.mode==="flyout")a._killFlyout();else a._killDrilldown();a._killmenuItems();a._killtrigger();a.element.unwrap().unwrap();a.element.removeData("domObject").removeData("topmenu").removeData("activeItem").removeData("firstLeftValue")},destroy:function(){this._destroy();a.Widget.prototype.destroy.apply(this)},activate:function(d,a){var b,c;this.deactivate(d);if(this.options.mode==="sliding"){b=this.element.data("domObject").scrollcontainer;b.wijsuperpanel("scrollChildIntoView",a)}c=a.eq(0).children(":first").addClass("ui-state-focus").attr("id","ui-active-menuitem").end();this.element.data("activeItem",c);this._trigger("focus",d,{item:a})},deactivate:function(c){var b=this.element.data("activeItem");if(!b)return;if(!c||c.keyCode!==a.ui.keyCode.RIGHT)if(b.length>0)this.options.mode==="flyout"&&b.has("ul").length>0&&this._hideCurrentSubmenu(b);b.children(":first").removeClass("ui-state-focus").removeAttr("id");this._trigger("blur");this.element.data("activeItem",null)},next:function(a){this._move("next",".wijmo-wijmenu-item:first",a)},previous:function(a){this._move("prev",".wijmo-wijmenu-item:last",a)},first:function(){var a=this.element.data("activeItem");return a&&!a.prevAll(".wijmo-wijmenu-item").length},last:function(){var a=this.element.data("activeItem");return a&&!a.nextAll(".wijmo-wijmenu-item").length},nextPage:function(g){var d=this,b,c,i,f,h,e;b=d.element.data("activeItem");c=b.parent();if(d.options.mode==="sliding"&&d._hasScroll()){if(!b||d.last()){d.activate(g,c.children(":first"));return}i=b.offset().top;h=this.options.maxHeight;e=c.children("li").filter(function(){f=h-(a(this).offset().top-i+a(this).height());var b=a(this).height();return f<b&&f>-b});if(!e.length)e=c.children(":last");this.activate(g,e.last())}else this.activate(g,c.children(!b||this.last()?":first":":last"))},previousPage:function(f){var i=this,c=i.element.data("activeItem"),b,h,g,d,e;b=c.parent();if(i.options.mode==="sliding"&&this._hasScroll()){if(!c||this.first()){this.activate(f,b.children(":last"));return}h=c.offset().top;g=this.options.maxHeight;d=b.children("li").filter(function(){e=a(this).offset().top-h+g-a(this).height();var b=a(this).height();return e<b&&e>-b});if(!d.length)d=b.children(":first");this.activate(f,d.first())}else this.activate(f,b.children(!c||this.first()?":last":":first"))},select:function(b){var a=this.element.data("activeItem");this._trigger("select",b,{item:a});this._setCheckable()},_setCheckable:function(){if(this.options.checkable){var a=this.element.data("activeItem");a.children(":first").toggleClass("ui-state-active")}},_setOption:function(a,b){this["_set_"+a]&&this["_set_"+a](b);this.options[a]=b},_set_mode:function(a){this._destroy();this.options.mode=a;this.refresh()},_set_orientation:function(c){var d=this,b=this.element.data("domObject").menucontainer;if(this.options.mode==="flyout"){b.removeClass(d.cssPre+"-vertical "+d.cssPre+"-horizontal").addClass("wijmo-wijmenu-"+c);a(">li:has(ul)",this.element).each(function(){if(c==="horizontal")a(">.wijmo-wijmenu-link",this).find(".ui-icon-triangle-1-e").removeClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-s");else a(">.wijmo-wijmenu-link",this).find(".ui-icon-triangle-1-s").removeClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e")})}else b.removeClass("wijmo-wijmenu-vertical wijmo-wijmenu-horizontal").addClass("wijmo-wijmenu-vertical")},_set_triggerEvent:function(c){this._killtrigger();this.options.triggerEvent=c;var b=a(this.options.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});b.length>0&&this._initTrigger(b);if(this.options.mode==="flyout"){this._killFlyout();this._flyout()}},_set_trigger:function(c){this._killtrigger();this.options.triggerEvent=c;var b=a(this.options.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});b.length>0&&this._initTrigger(b);if(this.options.mode==="flyout"){this._killFlyout();this._flyout()}},_initTrigger:function(b){var e=this.options,g=e.triggerEvent,c=this,d,f;if(b.is("iframe"))b=a(b.get(0).contentWindow.document);d=c.element.data("domObject").menucontainer;switch(g){case"click":b.bind("click.wijmenu",function(a){e.mode!=="popup"&&c._displaySubmenu(a,b,d)});break;case"mouseenter":b.bind("mouseenter.wijmenu",function(a){c._displaySubmenu(a,b,d)});break;case"dblclick":b.bind("dblclick.wijmenu",function(a){c._displaySubmenu(a,b,d)});break;case"rtclick":b.bind("contextmenu.wijmenu",function(a){c._displaySubmenu(a,b,d);a.preventDefault()})}a(document).bind("click.wijmenudoc",function(b){if(c.element.data("shown")){c.element.data("shown",false);return}if(a(b.target).parent().is(".wij-menu-all-lists"))return;var h=a(b.target).closest(".wijmo-wijmenu");if(h.length===0){if(e.mode==="sliding"){f=a(".wij-menu-breadcrumb",d);c._resetDrilldownMenu(f)}if(e.mode==="flyout"&&g!=="mouseenter"){c._hideAllMenus();return}c._hideSubmenu(d)}})},_killtrigger:function(){var c=this.options,b;if(c.trigger!==""){b=a(c.trigger);if(b&&b.length>0){b.unbind(".wijmenu");a(document).unbind("click.wijmenudoc")}}},_setAnimationOptions:function(){var a=this.options,g=a.showDuration,e=a.hideAnimated,f=a.showAnimated,d=a.hideAnimated,b=a.animated,c=a.duration;if(f===null)a.showAnimated=b;if(g===null)a.showDuration=c;if(d===null)a.hideAnimated=b;if(e===null)a.hideDuration=c},_move:function(g,f,c){var b=this.element.data("activeItem"),d,e;if(!b){this.activate(c,this.element.children(f));return}d=a(b)[g+"All"](".wijmo-wijmenu-item").eq(0);e=b.parent();if(d.length)this.activate(c,d);else this.activate(c,e.children(f))},refresh:function(){var b=this,e=b.options,d,c,g,h,f;b.element.data("domObject")&&b._destroy();b.element.wrap("<div><div></div></div>");d=b.element.parent();c=d.parent();d.addClass("scrollcontainer checkablesupport");c.addClass("ui-widget ui-widget-header wijmo-wijmenu ui-corner-all").addClass("ui-helper-clearfix").attr("aria-activedescendant","ui-active-menuitem");e.orientation==="horizontal"&&e.mode==="flyout"&&c.addClass("wijmo-wijmenu-horizontal");g={scrollcontainer:d,menucontainer:c};b.element.data("domObject",g);b.element.data("topmenu",true);h=a("li",b.element);!b.element.hasClass("wijmo-wijmenu-list ui-helper-reset")&&b.element.addClass("wijmo-wijmenu-list ui-helper-reset");h.each(function(g,f){var e=a(">ul",f).length>0,c=a(f),d,b=a(">:first",c);if(b.length===0)c.addClass("wijmo-wijmenu-separator ui-state-default ui-corner-all");else{c.attr("role","menuitem");if(b.is("a")){b.bind("mouseenter.wijmenuitem",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.wijmenuitem",function(){a(this).removeClass("ui-state-hover")});if(!c.hasClass("wijmo-wijmenu-item ")){c.addClass("ui-widget wijmo-wijmenu-item ui-state-default ui-corner-all");b.addClass("wijmo-wijmenu-link ui-corner-all");b.wrapInner("<span>").children("span").addClass("wijmo-wijmenu-text");if(e){d=a("<span>").addClass("ui-icon ui-icon-triangle-1-e");b.append(d)}}}else if(b.is("h1,h2,h3,h4,h5"))c.addClass("ui-widget-header ui-corner-all");else{c.addClass("ui-widget wijmo-wijmenu-itemui-state-default ui-corner-all");b.addClass("wijmo-wijmenu-link ui-corner-all");if(e){d=a("<span>").addClass("ui-icon ui-icon-triangle-1-e");b.append(d)}}}});this.element.show();a("ul",b.element).each(function(){a(this).addClass("wijmo-wijmenu-list ui-widget-content ui-corner-all").addClass("ui-helper-clearfix wijmo-wijmenu-child ui-helper-reset");a(this).hide()});if(this.options.mode==="flyout")this._flyout();else this._drilldown();if(e.trigger!==""){f=a(e.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});if(f.length>0){c.hide();b._initTrigger(f)}}},_showFlyoutSubmenu:function(f,d,e){var c=this,b=c.element.data("currentMenuList"),a;if(b!==undefined)for(a=b.length;a>0;a--)if(b[a-1].get(0)===d.parent().get(0))break;else c._hideSubmenu(b[a-1]);c._displaySubmenu(f,d.find(".wijmo-wijmenu-link:eq(0)"),e)},_getItemTriggerEvent:function(d){var f=this,b=f.options,c="default",e;if(b.trigger!=="")if(d.is(b.trigger))c=b.triggerEvent;else if(f.element.is(b.trigger))c=b.triggerEvent;else{d.parents(".wijmo-wijmenu-parent").each(function(e,d){if(a(d).is(b.trigger)){c=b.triggerEvent;return false}});if(c==="default"){e=a(b.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});if(e.length>0)c=b.triggerEvent}}d.data("triggerEvent",c);return c},_flyout:function(){var c=this.element.data("domObject").menucontainer,b=this;c.attr("role","menu");if(b.options.orientation==="horizontal"){c.attr("role","menubar");b.element.children("li:has(ul)").each(function(){a(this).children(".wijmo-wijmenu-link").find(".ui-icon-triangle-1-e").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s")})}c.find("li:has(ul)").each(function(){var h=a(this).find("ul"),d=a(this).attr("aria-haspopup",true),i,g,j=b._getItemTriggerEvent(d),f,e;d.children("ul").attr("role","menu").attr("aria-activedescendant","ui-active-menuitem");if(j!=="default"&&b.options.triggerEvent!=="mouseenter"){d.removeClass("wijmo-wijmenu-parent").addClass("wijmo-wijmenu-parent");f=a(this).find(".wijmo-wijmenu-link:eq(0)");e=f.next();switch(b.options.triggerEvent){case"click":f.bind("click.wijmenu",function(a){b._showFlyoutSubmenu(a,d,e)});break;case"dblclick":f.bind("dblclick.wijmenu",function(a){b._showFlyoutSubmenu(a,d,e)});break;case"rtclick":f.bind("contextmenu.wijmenu",function(a){b._showFlyoutSubmenu(a,d,e);a.preventDefault()})}a(document).bind("click.wijmenu",function(e){if(c.is(":animated"))return;var d=a(e.target).closest(".wijmo-wijmenu");d.length===0&&h.each(function(){b._hideSubmenu(a(this))})});e.data("notClose",true)}else{d.removeClass("wijmo-wijmenu-parent").addClass("wijmo-wijmenu-parent");a(this).find(".wijmo-wijmenu-link:eq(0)").bind("mouseenter.wijmenu",function(e){clearTimeout(g);var c=a(this).next(),d=a(this);i=setTimeout(function(){b._displaySubmenu(e,d,c)},300)}).bind("mouseleave.wijmenu",function(){clearTimeout(i);var c=a(this).next();g=setTimeout(function(){b._hideSubmenu(c)},400)});a(this).find("ul .wijmo-wijmenu-link,ul >.ui-widget-header,ul >.wijmo-wijmenu-separator").bind("mouseenter.wijmenu",function(){clearTimeout(g)}).bind("mouseleave.wijmenu",function(){g=setTimeout(function(){for(var c=h.length-1;c>=0;c--)b._hideSubmenu(a(h[c]))},500)})}});c.find(".wijmo-wijmenu-link").bind("click.wijmenu",function(f){if(a(this).is("a")){if(!a(this).next().is("ul"))b._hideAllMenus();else if(!(b.options.trigger!==""&&a(this).parent().data("triggerEvent")!=="default"&&b.options.triggerEvent!=="mouseenter"))b._hideAllMenus();else{var d=b.element.data("currentMenuList"),e,c;if(d!==undefined){e=a(this).parent();if(e.has("ul").length===0)for(c=d.length;c>0;c--){if(d[c-1].get(0)===e.parent().get(0))break;d[c-1].get(0)!==e.parent().get(0)&&b._hideSubmenu(d[c-1])}}}b.activate(f,a(this).parent())}b.select(f)}).bind("focusin",function(c){a(this).is("a")&&b.activate(c,a(this).parent())})},_hideAllMenus:function(){var b=this,f,e,c,d;d=b.element.find("ul");for(c=d.length-1;c>=0;c--)b._hideSubmenu(a(d[c]));if(b.options.trigger!==""){f=b.element.data("domObject").menucontainer;if(f.is(":animated"))return;e=a(b.options.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});if(e.length===0)return;b._hideSubmenu(b.element.data("domObject").menucontainer)}},hideAllMenus:function(){this._hideAllMenus()},_killFlyout:function(){var b=this.element.data("domObject").menucontainer.attr("role","");b.find("li").each(function(){a(this).removeClass("wijmo-wijmenu-parent").unbind(".wijmenu").children(":first").unbind(".wijmenu").attr("aria-haspopup","")});a(document).unbind("click.wijmenu")},_killmenuItems:function(){this.element.removeClass("wijmo-wijmenu-list ui-helper-reset wij-menu-content ui-helper-clearfix");this.element.find("li").each(function(){var b=a(this),c;b.removeClass("ui-widget wijmo-wijmenu-item ui-state-default ui-corner-all wijmo-wijmenu-parent ui-widget-header wijmo-wijmenu-separator");c=b.children(".wijmo-wijmenu-link");c.removeClass("wijmo-wijmenu-link ui-corner-all ui-state-focus ui-state-hover ui-state-active").html(c.children(".wijmo-wijmenu-text").html()).unbind(".wijmenu .wijmenuitem");b.children("ul").removeClass("wijmo-wijmenu-list ui-widget-content ui-corner-all ui-helper-clearfix wijmo-wijmenu-child ui-helper-reset").attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden","")});this.element.data("domObject").menucontainer.removeClass("")},_sroll:function(){var a=this.element.data("domObject").scrollcontainer,b=this.options.superPanelOptions||{};a.height(this.options.maxHeight);a.wijsuperpanel(b)},_hasScroll:function(){var a=this.element.data("domObject").scrollcontainer;return a.data("wijsuperpanel").vNeedScrollBar},_resetDrillChildMenu:function(a){a.removeClass("wij-menu-scroll").removeClass("wij-menu-current").height("auto")},_checkDrillMenuHeight:function(b,d,a){var e=this,c;d.height(b.height());a.wijsuperpanel("option","hScroller",{scrollValue:0});a.wijsuperpanel("option","vScroller",{scrollValue:0});a.wijsuperpanel("paintPanel");if(e._hasScroll()){c=5;if(b.prev().length>0)c=b.prev().css("padding-left").replace(/px/g,"");b.width(a.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-c)}},_resetDrilldownMenu:function(i){var d=this,e=d.options,b=this.element.data("domObject").menucontainer,c=b.find(".wijmo-wijmenu-list:first"),f=a('<li class="wij-menu-breadcrumb-text">'+e.crumbDefaultText+"</li>"),h=this.element.wrap("<div>").parent(),g=this.element.data("domObject").scrollcontainer;a(".wij-menu-current",b).removeClass("wij-menu-current");c.animate({left:0},e.showDuration,function(){a(this).find("ul").each(function(){a(this).hide();d._resetDrillChildMenu(a(this))});c.addClass("wij-menu-current")});a(".wij-menu-all-lists",b).find("span").remove();i.empty().append(f);a(".wij-menu-footer",b).empty().hide();d._checkDrillMenuHeight(c,h,g)},_drilldown:function(){var b=this,h=b.element.wrap("<div>").parent().css("position","relative"),d=b.element.data("domObject").menucontainer.attr("role","menu"),g=b.element.data("domObject").scrollcontainer,c=b.options,i,e=d.find(".wijmo-wijmenu-list:first"),f=a('<ul class="wij-menu-breadcrumb ui-widget-default ui-corner-all ui-helper-clearfix"></ul>'),l=a('<li class="wij-menu-breadcrumb-text">'+c.crumbDefaultText+"</li>"),o=c.backLink?c.backLinkText:c.topLinkText,m=c.backLink?"wij-menu-prev-list":"wij-menu-all-lists",k=c.backLink?"ui-state-default ui-corner-all":"",n=c.backLink?'<span class="ui-icon ui-icon-triangle-1-w"></span>':"",j=a('<li class="'+m+'"><a href="#" class="'+k+'">'+n+o+"</a></li>");d.addClass("wij-menu-ipod wij-menu-container");if(c.backLink)f.addClass("wij-menu-footer").appendTo(d).hide();else f.addClass("wij-menu-header").prependTo(d);!c.backLink&&f.append(l);e.addClass("wij-menu-content wij-menu-current ui-widget-content ui-helper-clearfix").css({width:d.width()}).find("ul").css({width:d.width(),left:d.width()}).attr("role","menu").attr("aria-activedescendant","ui-active-menuitem").addClass("ui-widget-content");h.height(b.element.height());b._sroll();if(b._hasScroll()){i=5;if(e.children(":first").children(":first").length>0)i=e.children(":first").children(":first").css("padding-left").replace(/px/g,"");e.width(g.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-i)}b.element.data("firstLeftValue",parseFloat(e.css("left")));a("li>.wijmo-wijmenu-link",e).each(function(){if(a(this).next().is("ul"))a(this).click(function(r){var o=a(this).next(),p=a(this).parents("ul:eq(0)"),m=p.data("topmenu")?0:parseFloat(e.css("left")),k,n,l,q=Math.round(m-parseFloat(d.width())),i=a(".wij-menu-footer",d);b._resetDrillChildMenu(p);b._checkDrillMenuHeight(o,h,g);e.stop(true,true).animate({left:q},c.showDuration);o.show().addClass("wij-menu-current").attr("aria-expanded","true");k=function(f){var j=f,e=a(".wij-menu-current",d),c;if(e.get(0)===b.element.get(0))return;c=e.parents("ul:eq(0)");e.hide().attr("aria-expanded","false");b._resetDrillChildMenu(e);b._checkDrillMenuHeight(c,h,g);c.addClass("wij-menu-current").attr("aria-expanded","true");if(c.hasClass("wij-menu-content")){j.remove();i.hide()}};if(c.backLink){if(i.find("a").size()===0){i.show();a('<a href="#"><span class="ui-icon ui-icon-triangle-1-w"></span> <span>'+c.backLinkText+"</span></a>").appendTo(i).click(function(){var f=a(this),b;e.stop(true,true);b=parseInt(e.css("left"),10)+parseInt(d.width(),10);if(b>m)return;e.animate({left:b},c.hideDuration,function(){k(f)})})}}else{if(f.find("li").size()===1){f.empty().append(j);j.find("a").click(function(){b._resetDrilldownMenu(f)})}a(".wij-menu-current-crumb",d).removeClass("wij-menu-current-crumb");n=a(this).find("span:eq(0)").text();l=a('<li class="wij-menu-current-crumb"><a href="#" class="wij-menu-crumb">'+n+"</a></li>");l.appendTo(f).find("a").click(function(){if(!a(this).parent().is(".wij-menu-current-crumb")){var b=-(a(".wij-menu-current").parents("ul").size()-1)*180;e.animate({left:b},c.showDuration,function(){k()});a(this).parent().addClass("wij-menu-current-crumb").find("span").remove();a(this).parent().nextAll().remove()}});l.prev().append(' <span class="ui-icon ui-icon-carat-1-e"></span>')}a(this).attr("href")==="#"&&r.preventDefault()});else a(this).click(function(c){b.activate(c,a(this).parent());b.select(c);if(b.options.trigger){var e=a(b.options.trigger).filter(function(){return a(this).closest(".wijmo-wijmenu").length===0});if(e.length){b._hideSubmenu(d);b._resetDrilldownMenu(f)}}a(this).attr("href")==="#"&&c.preventDefault()})})},_killDrilldown:function(){var b=this.element.data("domObject"),d={width:"",height:""},c;this.element.css(d).removeClass("ui-widget-content");b.scrollcontainer.css(d);c=a(".wijmo-wijsuperpanel-statecontainer",b.scrollcontainer);b.scrollcontainer.append(this.element);c.remove();b.menucontainer.removeClass("wij-menu-ipod wij-menu-container");a(".wij-menu-current",b.menucontainer).removeClass("wij-menu-current");a(".wij-menu-breadcrumb",b.menucontainer).remove();this.element.find("li").each(function(){var b=a(this).children(":first");b.unbind("click")});a("ul",this.element).css({left:"",width:""});this.element.css("left","")},_getItemByValue:function(c){var b=this.element.find("a.wijmo-wijmenu-link").filter(function(){return a(this).text()===c});return b.length>0?b.eq(0).parent():null},_displaySubmenu:function(i,e,b){var c=this.options,d=c.animated,h,g,f;e.is("a.wijmo-wijmenu-link")&&e.addClass("ui-state-active");b.show();this._setPosition(e,b);this.nowIndex++;this._setZindex(b,this.nowIndex);b.hide();this._trigger("showing",i,b);if(c.showAnimated)d=c.showAnimated;if(d&&a.wijmo.wijmenu.animations[d]){h=a.extend({animated:"fade",duration:400,complete:function(){if(a.browser.msie&&jQuery.browser.version==="9.0"){b.wrap("<div></div>");b.unwrap()}a.browser.msie&&jQuery.browser.version==="6.0"&&b.css("overflow","")}},{duration:c.showDuration,animated:c.showAnimated});g={context:b,show:true};a.wijmo.wijmenu.animations[d](h,g)}else b.show().attr("aria-hidden",false);if(this.options.triggerEvent==="click")this.element.data("shown",true);else this.element.data("shown",false);if(!b.is(".wijmo-wijmenu")){this.element.data("currentMenuList")===undefined&&this.element.data("currentMenuList",[]);f=this.element.data("currentMenuList");f.push(b);this.element.data("currentMenuList",f)}},_hideCurrentSubmenu:function(b){var c=this;b.find("ul").each(function(){!a(this).data("notClose")&&c._hideSubmenu(a(this))})},_hideSubmenu:function(b){var d=this.options,h=this,e=d.animated,g,f,c;if(d.hideAnimated)e=d.showAnimated;b.prev().is(".wijmo-wijmenu-link")&&b.prev().removeClass("ui-state-active");if(e){g=a.extend({animated:"fade",duration:400,complete:function(){h._setZindex(b)}},{animated:d.hideAnimated,duration:d.hideDuration});f={context:b,show:false};a.wijmo.wijmenu.animations[e](g,f)}else{b.hide().attr("aria-hidden",true);h._setZindex(b)}this.element.data("shown",false);c=this.element.data("currentMenuList");if(c){c=a.map(c,function(a){return a&&a.get(0)===b.get(0)?null:a});this.element.data("currentMenuList",a.makeArray(c))}},_setZindex:function(b,d){if(!this.element.data("domObject"))return;var c=this.element.data("domObject").menucontainer;if(b.get(0)===c.get(0))return;if(d){b.parent().css("z-index",10);b.css("z-index",d);c.css("z-index")===0&&c.css("z-index",9950)}else{b.css("z-index","");b.parent().css("z-index","");a.browser.msie&&a.browser.version<8&&a("ul:visible",this.element).length===0&&c.css("z-index","")}},_setPosition:function(c,b){b.css({left:"0",top:"0",position:"absolute"});var d=this._getPosition(c),e={of:c};b.position(a.extend(e,d))},_getPosition:function(c){var d=this.options,b={my:"left top",at:"right top"};if(d.orientation==="horizontal")if(c.parent().parent().parent().parent().is(".wijmo-wijmenu"))b={my:"left top",at:"left bottom"};if(!c.is(".wijmo-wijmenu-link"))b={my:"left top",at:"left bottom"};b=a.extend(b,d.position);return b}});a.extend(a.wijmo.wijmenu,{animations:{slide:function(b,c){b=a.extend({duration:400,easing:"swing"},b,c);if(b.show)b.context.stop(true,true).animate({height:"show"},b).attr("aria-hidden",false);else b.context.stop(true,true).animate({height:"hide"},b).attr("aria-hidden",true)}}})})(jQuery);