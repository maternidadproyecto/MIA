/*
 *
 * Wijmo Library 1.0.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
"use strict";(function(a){a.widget("wijmo.wijsplitter",{options:{showExpander:true,splitterDistance:100,orientation:"vertical",fullSplit:false,resizeSettings:{animationDuration:100,easing:"swing",ghost:false,increment:1},panel1:{minSize:1,collapsed:false,scrollBars:"auto"},panel2:{minSize:1,collapsed:false,scrollBars:"auto"}},getOptionsCopy:function(){return this.options},setOption:function(b,a){this.options[b]=a;return this},_create:function(){var b=this.element.height();this._setStructure();this._attachClass();this._checkFullSplitMode();this._initElements();this.refresh();a(this.element).trigger("load");this._bindEvents();this._initResizer();if(window.navigator.userAgent.indexOf("MSIE 6.0")>-1||window.navigator.userAgent.indexOf("MSIE 7.0")>-1)this.options.orientation==="vertical"&&a(".ui-resizable-handle",this.element).height(b)},destroy:function(){var b=this,e,d,c;if(b._getPanel1())b._getPanel1().is(":ui-wijresizable")&&b._getPanel1().wijresizable("destroy");e=this._getExpander();e.unbind("."+b.widgetName);a(window).unbind("."+b.widgetName);d=this.element.data("originalContent");this.element.html(d);c=this.element.data("originalStyle");this.element.removeAttr("class");if(c===undefined)this.element.removeAttr("style");else this.element.attr("style",c)},_setStructure:function(){var d,g,b,c,e,j,f,h,i;b=this.element.find("> div").get();if(b.length===1)d=b[0];else if(b.length>=2){d=b[0];g=b[1]}this.element.data("originalStyle",this.element.attr("style"));this.element.data("originalContent",this.element.html());c=a('<div class="wijmo-splitter-wrapper"></div>');this.element.append(c);e=a("<div></div>");c.append(e);if(d)e.append(d);else{h=a("<div></div>");e.append(h)}j=a("<div><div><span></span></div></div>");c.append(j);f=a("<div></div>");c.append(f);if(g)f.append(g);else{i=a("<div></div>");f.append(i)}},_attachClass:function(){if(this.options.orientation==="vertical"){this.element.addClass("wijmo-wijsplitter-vertical");this._getPanel1().addClass("wijmo-wijsplitter-v-panel1");this._getPanel1Content().addClass("wijmo-wijsplitter-v-panel1-content ui-widget-content");this._getBar().addClass("wijmo-wijsplitter-v-bar ui-widget-header");this._getExpander().addClass("wijmo-wijsplitter-v-expander ui-state-default").addClass("ui-corner-tl ui-corner-bl");this._getExpander().find("> span").addClass("ui-icon ui-icon-arrowthickstop-1-w");this._getPanel2().addClass("wijmo-wijsplitter-v-panel2");this._getPanel2Content().addClass("wijmo-wijsplitter-v-panel2-content ui-widget-content")}else{this.element.addClass("wijmo-wijsplitter-horizontal");this._getPanel1().addClass("wijmo-wijsplitter-h-panel1");this._getPanel1Content().addClass("wijmo-wijsplitter-h-panel1-content ui-widget-content");this._getBar().addClass("wijmo-wijsplitter-h-bar ui-widget-header");this._getExpander().addClass("wijmo-wijsplitter-h-expander ui-state-default").addClass("ui-corner-tl ui-corner-tr");this._getExpander().find("> span").addClass("ui-icon ui-icon-arrowthickstop-1-n");this._getPanel2().addClass("wijmo-wijsplitter-h-panel2");this._getPanel2Content().addClass("wijmo-wijsplitter-h-panel2-content ui-widget-content")}this._getExpander().attr("role","button")},_getPanel1:function(){return this.element.find("> div > div:eq(0)")},_getPanel1Content:function(){return this._getPanel1().find("> div:eq(0)")},_getBar:function(){return this.element.find("> div > div:eq(1)")},_getExpander:function(){return this._getBar().find("> div")},_getPanel2:function(){return this.element.find("> div > div:eq(2)")},_getPanel2Content:function(){return this._getPanel2().find("> div:eq(0)")},_getContainer:function(){return this.element.find("> div")},_initElements:function(){var a,c,b,d,g,k,i,j,f,e,h;this._getContainer().height(this.element.height());this._setPanelsScrollMode();a=this.options.splitterDistance;c=this.element.width();b=this.element.height();if(this.options.orientation==="vertical"){d=this._getBar().outerWidth();if(a>c-d)a=c-d;g=this._getExpander().height();this._getContainer().width(c*2);if(this.options.panel2.collapsed&&!this.options.panel1.collapsed)a=c-d;this._getPanel1().height(b);this._getPanel1().width(a);if(window.navigator.userAgent.indexOf("Safari")>-1){k=this._getPanel1Content().borderSize().width;i=this._getPanel1Content().borderSize().height;this._getPanel1Content().css("float","none").css("height",b-i).css("width",a-k).css("float","left")}else{this._getPanel1Content().setOutHeight(b);this._getPanel1Content().setOutWidth(a)}if(this.options.panel1.collapsed){this.element.addClass("wijmo-wijsplitter-v-collapsed");this._getPanel1().css("display","none");a=0}else{this.element.addClass("wijmo-wijsplitter-v-expanded");this._getPanel1().css("display","")}if(window.navigator.userAgent.indexOf("Safari")>-1){j=this._getBar().borderSize().height;this._getBar().css("float","none").height(b-j).css("float","left")}else this._getBar().setOutHeight(b);this._getPanel2().height(b);this._getPanel2().width(c-a-d);if(window.navigator.userAgent.indexOf("Safari")>-1){f=this._getPanel2Content().borderSize().width;this._getPanel2Content().css("float","none").height(b-f).width(c-a-d-f).css("float","left")}else{this._getPanel2Content().setOutHeight(b);this._getPanel2Content().setOutWidth(c-a-d)}this._getExpander().css("cursor","pointer");this._getExpander().css("top",b/2-g/2)}else{e=this._getBar().outerHeight();if(a>b-e)a=b-e;h=this._getExpander().width();if(this.options.panel2.collapsed&&!this.options.panel1.collapsed)a=b-e;this._getPanel1().width(c).height(a);this._getPanel1Content().setOutWidth(c);this._getPanel1Content().setOutHeight(a);if(this.options.panel1.collapsed){this.element.addClass("wijmo-wijsplitter-h-collapsed");this._getPanel1().css("display","none");a=0}else{this.element.addClass("wijmo-wijsplitter-h-expanded");this._getPanel1().css("display","")}this._getBar().setOutWidth(c);this._getPanel2().width(c).height(b-a-e);this._getPanel2Content().setOutWidth(c);this._getPanel2Content().setOutHeight(b-a-e);this._getExpander().css("cursor","pointer");this._getExpander().css("left",c/2-h/2)}if(this.options.showExpander)this._getExpander().css("display","");else this._getExpander().css("display","none")},_bindEvents:function(){var b=this,d,c;d=this._getBar();c=this._getExpander();c.bind("mouseup."+b.widgetName,b,b._expanderMouseUp);c.bind("mouseover."+b.widgetName,b,b._expanderMouseOver);c.bind("mousedown."+b.widgetName,b,b._expanderMouseDown);c.bind("mouseout."+b.widgetName,b,b._expanderMouseOut);d.bind("mouseover."+b.widgetName,b,b._barMouseOver);d.bind("mouseout."+b.widgetName,b,b._barMouseOut);a(window).bind("resize."+b.widgetName,b,b._documentResize)},_barMouseOver:function(b){a(b.currentTarget).addClass("ui-state-hover")},_barMouseOut:function(b){a(b.currentTarget).removeClass("ui-state-hover")},_documentResize:function(b){var a=b.data;a.refresh()},_expanderMouseOver:function(b){a(b.currentTarget).addClass("ui-state-hover")},_expanderMouseDown:function(b){a(b.currentTarget).addClass("ui-state-active")},_expanderMouseOut:function(b){a(b.currentTarget).removeClass("ui-state-hover ui-state-active")},_expanderMouseUp:function(e){var b=e.data,c,d;a(e.currentTarget).removeClass("ui-state-active");if(!b.options.panel1.collapsed&&b.options.panel2.collapsed){b.options.panel2.collapsed=false;b._initElements();return}if(b.options.panel1.collapsed){c=a.Event("expand");a(b.element).trigger(c);if(c.isImmediatePropagationStopped())return}else{d=a.Event("collapse");a(b.element).trigger(d);if(d.isImmediatePropagationStopped())return}b.options.panel1.collapsed=!b.options.panel1.collapsed;b._initElements();if(b.options.orientation==="vertical"){b.element.removeClass("wijmo-wijsplitter-v-expanded wijmo-wijsplitter-v-collapsed");b._getExpander().removeClass("ui-corner-tl ui-corner-bl ui-corner-tr ui-corner-br");b._getExpander().find("span").removeClass("ui-icon-arrowthickstop-1-w ui-icon-arrowthickstop-1-e");if(b.options.panel1.collapsed){b.element.addClass("wijmo-wijsplitter-v-collapsed");b._getExpander().addClass("ui-corner-tr ui-corner-br");b._getExpander().find("span").addClass("ui-icon-arrowthickstop-1-e")}else{b.element.addClass("wijmo-wijsplitter-v-expanded");b._getExpander().addClass("ui-corner-tl ui-corner-bl");b._getExpander().find("span").addClass("ui-icon-arrowthickstop-1-w")}}else{b.element.removeClass("wijmo-wijsplitter-h-expanded wijmo-wijsplitter-h-collapsed");b._getExpander().removeClass("ui-corner-tl ui-corner-tr ui-corner-bl ui-corner-br");b._getExpander().find("span").removeClass("ui-icon-arrowthickstop-1-n ui-icon-arrowthickstop-1-s");if(b.options.panel1.collapsed){b.element.addClass("wijmo-wijsplitter-h-collapsed");b._getExpander().addClass("ui-corner-bl ui-corner-br");b._getExpander().find("span").addClass("ui-icon-arrowthickstop-1-s")}else{b.element.addClass("wijmo-wijsplitter-h-expanded");b._getExpander().addClass("ui-corner-tl ui-corner-tr");b._getExpander().find("span").addClass("ui-icon-arrowthickstop-1-n")}}if(b.options.panel1.collapsed)a(b.element).trigger("collapsed");else a(b.element).trigger("expanded")},_initResizer:function(){var b=this,h,g,f,j,d,e,i,c;h=this.element.width();g=this.element.height();if(this.options.orientation==="vertical"){f=this._getBar().outerWidth();j=h-f-this.options.panel2.minSize;d=this.options.panel1.minSize;if(d<2)d=2;b._getPanel1().wijresizable({wijanimate:true,minWidth:d,maxWidth:j,handles:"e",helper:"wijmo-wijsplitter-v-resize-hepler",animateDuration:b.options.resizeSettings.animationDuration,animateEasing:b.options.resizeSettings.easing,stop:function(a){b._resizeStop(a,b)}});b._getPanel1().bind("animating",function(a){b._animating(a,b)});b._getPanel1().bind("animated",function(a){b._animated(a,b)})}else{e=this._getBar().outerHeight();i=g-e-this.options.panel2.minSize;c=this.options.panel1.minSize;if(c<2)c=2;b._getPanel1().wijresizable({wijanimate:true,minHeight:c,maxHeight:i,handles:"s",helper:"wijmo-wijsplitter-h-resize-hepler",animateDuration:b.options.resizeSettings.animationDuration,animateEasing:b.options.resizeSettings.easing,stop:function(a){b._resizeStop(a,b)}});b._getPanel1().bind("animating",function(a){b._animating(a,b)});b._getPanel1().bind("animated",function(a){b._animated(a,b)})}a(".ui-resizable-handle",this.element).bind("mouseover",function(a){b._handlemouseover(a,b)});a(".ui-resizable-handle",this.element).bind("mouseout",function(a){b._handlemouseout(a,b)})},_handlemouseover:function(c,b){if(b.options.orientation==="vertical")a(".wijmo-wijsplitter-v-bar",this.element).addClass("ui-state-hover");else a(".wijmo-wijsplitter-h-bar",this.element).addClass("ui-state-hover")},_handlemouseout:function(c,b){if(b.options.orientation==="vertical")a(".wijmo-wijsplitter-v-bar",this.element).removeClass("ui-state-hover");else a(".wijmo-wijsplitter-h-bar",this.element).removeClass("ui-state-hover")},_animated:function(c,b){b._adjustLayout(b);a(b.element).trigger("sized")},_animating:function(c,b){b._adjustLayout(b);a(b.element).trigger("sizing")},_adjustLayout:function(a){if(a.options.orientation==="vertical"){a.options.splitterDistance=a._getPanel1().width();a._initElements()}else{a.options.splitterDistance=a._getPanel1().height();a._initElements()}},_resizeStop:function(b,a){a._adjustLayout(a)},_checkFullSplitMode:function(){if(this.element.css("width")==="100%"&&this.element.css("height")==="100%")this.options.fullSplit=true},_setPanelsScrollMode:function(){var a,b;a=this._getPanel1Content();b=this._getPanel2Content();if(this.options.panel1.scrollBars==="auto")a.css("overflow","auto");else if(this.options.panel1.scrollBars==="both")a.css("overflow","scroll");else if(this.options.panel1.scrollBars==="none")a.css("overflow","hidden");else if(this.options.panel1.scrollBars==="horizontal")a.css("overflow-x","scroll").css("overflow-y","hidden");else this.options.panel1.scrollBars==="vertical"&&a.css("overflow-x","hidden").css("overflow-y","scroll");if(this.options.panel2.scrollBars==="auto")b.css("overflow","auto");else if(this.options.panel2.scrollBars==="both")b.css("overflow","scroll");else if(this.options.panel2.scrollBars==="none")b.css("overflow","hidden");else if(this.options.panel2.scrollBars==="horizontal")b.css("overflow-x","scroll").css("overflow-y","hidden");else this.options.panel2.scrollBars==="vertical"&&b.css("overflow-x","hidden").css("overflow-y","scroll")},_setFullSplitMode:function(){this.element.css("width","100%").css("height","100%")},invalidate:function(){this._initElements()},refresh:function(){if(this.options.fullSplit){this._setFullSplitMode();this._initElements();this._adjustPanelContentsForChrome()}},_adjustPanelContentsForChrome:function(){var b;if(window.navigator.userAgent.indexOf("Chrome")>-1)if(this.options.orientation==="horizontal"){b=a(".wijmo-wijsplitter-h-panel1",this.element).width();a(".wijmo-wijsplitter-h-panel1",this.element).children("div").outerWidth(b);a(".wijmo-wijsplitter-h-panel2",this.element).children("div").outerWidth(b);a(".wijmo-wijsplitter-h-bar",this.element).outerWidth(b)}}})})(jQuery);(function(a){a.widget("ui.wijresizable",a.ui.resizable,{options:{wijanimate:false}});a.ui.plugin.add("wijresizable","wijanimate",{stop:function(l){var b=a(this).data("wijresizable"),k=b.options,c,j,d,e,h,i,f,g;b.element.css("width",b.originalSize.width);b.element.css("height",b.originalSize.height);c=b._proportionallyResizeElements;e=c.length&&/textarea/i.test(c[0].nodeName);h=e&&a.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height;i=e?0:b.sizeDiff.width;j={width:b.size.width-i,height:b.size.height-h};f=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null;g=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(a.extend(j,g&&f?{top:g,left:f}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){d={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};c&&c.length&&a(c[0]).css({width:d.width,height:d.height});b._updateCache(d);b._propagate("resize",l);b.element.trigger("animating")},complete:function(){b.element.trigger("animated")}})}})})(jQuery);